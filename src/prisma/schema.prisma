datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}
enum Role {
  customer
  admin
}

model User {
  id        String   @id @default(uuid())    
  email     String   @unique
  name      String?
  role      Role     @default(customer)
  password  String
  createdAt DateTime @default(now())
  verify    Boolean @default(false) 
  // üí¨ –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –º–Ω–æ–≥–æ –∑–∞–∫–∞–∑–æ–≤
  orders    Order[]
}

enum category {
  laptop 
  desktop
  accessory
}

model Product {
  id        String   @id @default(uuid())    
  name      String?
  category  category     @default(desktop)
  description String
  price     Int
  stock     Int
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
    // üí¨ –û–¥–∏–Ω —Ç–æ–≤–∞—Ä –º–æ–∂–µ—Ç –≤—Å—Ç—Ä–µ—á–∞—Ç—å—Å—è –≤–æ –º–Ω–æ–≥–∏—Ö –ø–æ–∑–∏—Ü–∏—è—Ö –∑–∞–∫–∞–∑–∞
  orderItems  OrderItem[]
}

enum Status {
  pending  
  paid  
  shipped
  cancelled
}

model Order{
  id        String   @id @default(uuid())   
  userId    String   
  total     Int
  Status    Status 
  createdAt DateTime @default(now())
   // üí¨ –°–≤—è–∑—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
  user      User        @relation(fields: [userId], references: [id], onDelete: Cascade)
    // üí¨ –û–¥–∏–Ω –∑–∞–∫–∞–∑ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä–æ–≤
  items     OrderItem[]
}

model OrderItem{
  id        String   @id @default(uuid())   
  orderId    String   
  productId     String
  quantity    Int 
  price Int
// üí¨ –°–≤—è–∑–∏
  order      Order     @relation(fields: [orderId], references: [id], onDelete: Cascade)
  product    Product   @relation(fields: [productId], references: [id], onDelete: Cascade)
}


